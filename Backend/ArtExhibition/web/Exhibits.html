<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/journal/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link  href="StyleTheme.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script>
</head>
<body onload="onbodyload()">
  <!--NavBar-->
  <header class="p-3 border-bottom mb-3 bg-primary">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="Home.html" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <img src="Images/logo2bg.png" class="rounded-2" style="height:48px; width:48px;">
        </a>
          <h4 class="text-white mx-2">CranoniaGallery</h4>
        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <li><a href="Home.html" class="nav-link px-2 text-white">Home</a></li>
          <li><a href="Exhibits.html" class="nav-link px-2 text-white">Exhibits</a></li>
          <li><a href="Artists.html" class="nav-link px-2 text-white">Artists</a></li>
          <li><a href="Blog.html" class="nav-link px-2 text-white">Blog</a></li>
          <li><a href="About.html" class="nav-link px-2 text-white">About</a></li>
        </ul>
        <!-- <div style="width: 36px; height: 36px;" class="bg-light me-2"></div> 
        <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">         
          <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search...">
        </form> -->
        <a href="#" class="nav-link px-2 text-white">For Artists</a>
        <div class="d-flex text-end">
            <div id = "notlog">  
          <button type="button" class="btn btn-outline-light me-2" onclick="window.location.href='LoginPage.html';">Login</button>
          <button type="button" class="btn btn-warning text-dark" onclick="window.location.href='SignupPage.html';">Sign-up</button>
            </div>
          <div class="dropdown ms-2" id="actlog">
            <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Manage
            </button>
            <ul class="dropdown-menu">
              <li><button class="dropdown-item" type="button" onclick="window.location.href='AddExhibit.html';">Add Exhibit</button></li>
              <li><button class="dropdown-item" type="button" onclick="window.location.href='DeleteExhibit.html';">Delete Exhibit</button></li>
              <li><button class="dropdown-item" type="button" onclick="window.location.href='BuyTable.html';">Buy Requests</button></li>
              <li><button class="dropdown-item" type="button" onclick="window.location.href='PublishBlog.html';">Publish Blog</button></li>
              <li><button class="dropdown-item" type="button" onclick="window.location.href='AccountSetup.html';">Account Setup</button></li>
              <li><hr class="dropdown-divider"></li>
              <li><button class="dropdown-item" type="button" onclick="onlogout()">Logout</button></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </header> 
  <div class="container-md" id="topParentCont">
    <!--Exhibits-->
    <div class="container px-0 pt-2 pb-3">
      <h1 class="pb-2 mb-3 border-bottom border-dark text-center">Exhibits Showcase</h1>
      <div id="mastergrid">     
        <div class="row g-3" data-masonry='{"percentPosition":true}' id="buybutton">
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images/mclaren-765lt.jpg">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1900</h5>
                      <button type="button" class="btn btn-primary p-1 px-3" id="item01">Contact Artist</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images/imgdefault.jpg">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <!-- <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1800</h5>
                      <button type="button" class="btn btn-primary disabled"><h6 class="m-0">Not For Sale</h6></button>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images/greybox.png">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1900</h5>
                      <button type="button" class="btn btn-primary"><h6 class="m-0">Contact Artist</h6></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images//imgdefault.jpg">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1900</h5>
                      <button type="button" class="btn btn-primary"><h6 class="m-0">Contact Artist</h6></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images//imgdefault.jpg">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1900</h5>
                      <button type="button" class="btn btn-primary"><h6 class="m-0">Contact Artist</h6></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="card shadow efcard rounded-4 arcard overflow-hidden">
                <img class="card-img rounded-4" src="Images/mclaren-765lt.jpg">
                <div class="arcardover">
                  <div class="card-img-overlay rounded-4 bg-dark text-white bg-opacity-50 p-3 d-flex flex-column">
                    <h3 class="card-title text-nowrap overflow-hidden mt-auto">Mclaren</h3>
                    <p class="card-text text-nowrap overflow-hidden">From artist</p>
                    <div class="d-flex justify-content-between align-items-center ">
                      <h5 class="m-0">$1900</h5>
                      <button type="button" class="btn btn-primary p-1 px-3" id="item02">Contact Artist</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
    <!-- Button to Open the Modal -->
    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">
      Open modal
    </button> -->

    <!-- The Modal -->
    <div class="modal fade" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header p-4 pb-3 border-bottom-0">
            <h1 class="fw-bold mb-0 fs-2">Enter your details</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <!-- Modal body -->
          <div class="modal-body p-4 pt-0">
            <form>
              <!-- <img class="mb-4" src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
              <h1 class="h4 mb-3 fw-normal">Contact artist to buy</h1> 
              <div class="d-flex flex-column pb-2">
                <ul class="list-group list-group-horizontal">
                  <li class="list-group-item">Exhibit Name</li>
                  <li class="list-group-item" id="model_exname">sdsdsds</li>
                </ul>
                <ul class="list-group list-group-horizontal">
                  <li class="list-group-item">Exhibit ID</li>
                  <li class="list-group-item" id="model_exid">qwewew</li>
                </ul>
              </div>
              <div class="form-floating">
                <input type="text" class="form-control" id="cname" name="cname" placeholder="alex jonas" required>
                <label for="cname">Your Name</label>
              </div>
              <div class="form-floating">
                <input type="email" class="form-control" id="cemail" name="cemail" placeholder="name@example.com" required>
                <label for="cemail">Email address</label>
              </div>
              <div class="form-floating">
                <input type="number" class="form-control" id="cprice" name="cprice" placeholder="Password" required>
                <label for="cprice">Your buy price</label>
              </div>
              <div class="form-floating">
                <input type="text" class="form-control" id="cnotes"  name="cnotes" placeholder="alex jonas">
                <label for="cnotes">Additional notes</label>
              </div>
              <button class="btn btn-primary w-100 py-2 mt-3" type="button" onclick="sendbuyrequest()">Submit</button>
            </form> 
            <div class="alert alert-success alert-dismissible hide show m-0 mt-3 p-2" id="alert">
              <button type="button" class="btn-close"  onclick="hidealert()"></button>
              <strong>Success!</strong><p>Your buy request is successfully send to the artist</p>
            </div>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer p-3 pb-3 m-0">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Footer-->
  <div>
    <footer class="py-3 my-0 bg-primary">
      <ul class="nav justify-content-center border-bottom pb-3 mb-3">
        <li class="nav-item"><a href="Home.html" class="nav-link px-2 text-white">Home</a></li>
        <li class="nav-item"><a href="Exhibits.html" class="nav-link px-2 text-white">Exhibits</a></li>
        <li class="nav-item"><a href="Artists.html" class="nav-link px-2 text-white">Artists</a></li>
        <li class="nav-item"><a href="Blog.html" class="nav-link px-2 text-white">Blogs</a></li>
        <li class="nav-item"><a href="About.html" class="nav-link px-2 text-white">About</a></li>
      </ul>
      <p class="text-center text-white">© 2024 CranoniaGallery, Inc</p>
    </footer>
  </div>
  <script src="maincom.js" type="text/javascript"></script>
  <script>
    function hidealert(){
        $("#alert").hide();
    }
    function showalert(){
      $("#alert").show();
    }
    $(document).ready(function(){
      fetchgrid();
      hidealert();
      $(".arcardover").hide();
      $(".arcard").mouseenter(function(){
        $(this).find(".arcardover").show(200);
        $(this).find("img").animate({width: '+=20px'}, 200);
      }).mouseleave(function(){
        $(this).find(".arcardover").hide(200);
        $(this).find("img").animate({width: '-=20px'}, 200);
      })
    });
    function sendbuyrequest(){
      console.log("fetech called");
      console.log(document.getElementById('model_exname').innerText);
      var formdata = {
        cname: $("#cname").val(),
        cemail: $("#cemail").val(),
        cprice: $("#cprice").val(),
        cnotes: $("#cnotes").val(),
        exname: document.getElementById('model_exname').innerText
      };
      $.ajax({
          type: 'POST',
          headers: {"addbuy": "yes"},
          url: 'MainArtistServlet',
          data: formdata,
          success: function(response) {
            if (response.trim()==="valid"){
              showalert();
            }
          },
          error: function() {
              alert('Error occurred while processing your request.');
          }
      });
    }
    function fetchgrid(){
      console.log("fetech called");
      $.ajax({
          type: 'POST',
          headers: {"fetchgrid": "yes"},
          url: 'AddExhibitServlet', 
          success: function(response) {
            document.getElementById('mastergrid').innerHTML = response;  
            cardoverhide();
          },
          error: function() {
              alert('Error occurred while processing your request.');
          }
      });
    }
    function cardoverhide(){
      $(".arcardover").hide();
      $(".arcard").mouseenter(function(){
        $(this).find(".arcardover").show(200);
        $(this).find("img").animate({width: '+=20px'}, 200);
      }).mouseleave(function(){
        $(this).find(".arcardover").hide(200);
        $(this).find("img").animate({width: '-=20px'}, 200);
      })
      const wrapper = document.getElementById('buybutton');
      var myModal = new bootstrap.Modal(document.getElementById('myModal'))
      wrapper.addEventListener('click', (event) => {     
        const isButton = event.target.nodeName === 'BUTTON';
        if (!isButton) {
          return;
        }
        console.log(event.target.id);
        document.getElementById('model_exname').innerHTML = event.target.id;
        document.getElementById('model_exid').innerHTML = "10d27js8";
        myModal.show();
      })
    }
  </script>
  <script>
    const wrapper = document.getElementById('buybutton');
    var myModal = new bootstrap.Modal(document.getElementById('myModal'))
    wrapper.addEventListener('click', (event) => {     
      const isButton = event.target.nodeName === 'BUTTON';
      if (!isButton) {
        return;
      }
      console.log(event.target.id);
      document.getElementById('model_exname').innerHTML = event.target.id;
      myModal.show();
    })
  </script>
</body>
</html>